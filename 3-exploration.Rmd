---
title: "Statistiques descriptives"
description: | 
  Cette page vise à présenter de manière plus détaillée le contenu des banques de données, en plus d'illustrer la distribution de certaines variables intéressantes et pertinentes en ce qui concerne le déroulement de la vaccination contre la pandémie de COVID-19.
date: "2021-12-22"
# Modifier les détails que vous voulez
author:
  - first_name: "Gabrielle"
    last_name: "Desrosiers-Brisebois"
    url: https://github.com/GabrielleDesrosiersBrisebois
    # les champs d'affiliation sont optionnels, vous pouvez les
    # comment out en ajoutant un # devant.
    affiliation: Département de science politique, Université de Montréal
    affiliation_url: https://pol.umontreal.ca/accueil/
    # changer pour votre propre orcid id
    # https://orcid.org/ pour vous inscrire.
    orcid_id: 0000-0002-8095-188X
# Changer pour votre propre URL si jamais quelqu'un vous cite!
citation_url: https://gabrielledesrosiersbrisebois.github.io/FAS1002_projet-final/
# Inclure les références que vous utilisez dans vos rapports
# dans un fichier biblio.bib. Je conseille Zotero pour construire
# ce fichier ou d'utiliser le package citr dans RStudio.
# Installation: devtools::install_github("crsh/citr")
bibliography: references.bib
output: distill::distill_article
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = FALSE)
```

## Exploration des variables liées à la vaccination

::: {style="text-align: justify"}
Cette section a pour objectif de présenter des statistiques descriptives en lien avec les quelques variables vaccinales tirées du jeu de données *Our World in Data*.
:::

### Moment de l'obtention des données liées à la vaccination, par pays

::: {style="text-align: justify"}
Comme cela a été préalablement évoqué dans la [page précédente](2-import.html), l'ensemble de données ne sont pas mises à jour au même moment. En ce sens, seules celles de @mathieu2021 sont actualisées sur une base quotidienne. Malgré des données vaccinales actualisées à tous les jours, certains pays ne sont toutefois pas en mesure de soumettre leurs données vaccinales sur une base quotidienne. Il devient alors pertinent de visualiser la plus récente donnée de vaccination en fonction de chaque pays, au moment de la production de ce rapport, soit le 22 décembre 2021.  
:::

```{r include=FALSE}
#Manipulations :

recent_data <- df_countries %>% 
  group_by(name) %>% 
  summarise(most_recent_date = format(max(as_date(date)))) %>% 
  ungroup()

#Franciser les noms des pays :

recent_data <- recent_data %>% 
    mutate(name = countryname(name, destination = "un.name.fr")) 

recent_data$name <-  recent_data$name %>% 
  replace_na("Timor") #Francisation ne s'est pas effectuée, donc ajouter le Timor manuellement.

colnames(recent_data) <- c("Pays", "Date") 
```

```{r recent, fig.cap="Date de l'obtention des données vaccinales les plus récentes, par pays"}
kable(recent_data, caption = "Date de l'obtention des données vaccinales les plus récentes, par pays") %>% 
  kable_styling(full_width = FALSE, font_size = 12) %>% 
  scroll_box(width = "720px", height = "400px")
```

```{r include=FALSE}
kable(recent_data, caption = "Date de l'obtention des données vaccinales les plus récentes, par pays") %>% 
  kable_styling(full_width = FALSE, font_size = 12) %>% 
  scroll_box(width = "720px", height = "400px") %>% 
  save_kable("figures/table_2.png")
```

```{r recentvacc, fig.cap="Fréquence aggrégée de l'obtention des plus récentes données de vaccination", layout="l-body-outset", fig.width=6, fig.height=4}
#Manipulations :

recent_data <- recent_data %>% 
  group_by(Date) %>% 
  do(data.frame(., count = length(.$Date))) %>% 
  distinct(Date, count)

# Graphique

g3 <- ggplot(data = recent_data, 
       aes(x = Date, y = count)) +
  
  geom_col(width = 1, fill = "#7ae582", color = "#ffffff") +
  geom_text(aes(label = count),
            vjust = -0.5,
            size = 2,
            color = "#000000") +
  
  scale_x_discrete(name = "") +
  scale_y_continuous(name = "Nombre de pays",
                     breaks = seq(0, 60, 15)
                     ) +
  
  labs(title = "Date d'obtention des plus récentes données de vaccination",
       subtitle = "Fréquence aggrégée en fonction du nombre de pays") +
  
  theme_ipsum() +
  theme(plot.title = element_text(size = 12, hjust = 0.5),
        plot.subtitle = element_text(size = 10, hjust = 0.5, vjust = 4.5),
        plot.background = element_rect(fill = "white"),
        panel.background = element_rect(fill = "white", color = "white", size = 0.5, linetype = "solid"),
        axis.text.y = element_text(size = 5.5),
        axis.text.x = element_text(size = 5, angle = 30, hjust = 0.8, vjust = 0.7),
        axis.ticks.x = element_line())

g3
```

```{r include=FALSE}
ggsave("figures/figure_3.jpeg", plot = g3, width = 6, height = 4)
```

::: {style="text-align: justify"}
À l'aide de ce graphique à barres, il est possible de remarquer qu'une pluralité de pays possèdent des données vaccinales à jour, c'est-à-dire datant de moins de vingt-quatre heures. En revanche, quelques données possèdent des informations vaccinales qui ne sont plus réellement d'actualité puisqu'elles sont plusieurs mois en retard. Pour en savoir plus sur les dates de mises à jour de chacun des pays, il est possible de consulter le tableau \@ref(tab:recent). 
:::

***rendre accessible ici, après les calculs, un lien vers mes data sur GitHub.***

### Vaccinations quotidiennes par million d'habitants

#### Au niveau des continents

```{r include=FALSE}
stats_vacc_continents <- df_countries %>% 
  group_by(continent) %>% 
  summarise(Minimum = min(daily_vaccinations_per_million, na.rm = TRUE),
            Maximum = max(daily_vaccinations_per_million, na.rm = TRUE),
            Moyenne = mean(daily_vaccinations_per_million, na.rm = TRUE),
            Médiane = median(daily_vaccinations_per_million, na.rm = TRUE)) %>%
  ungroup()

stats_vacc_continents$Moyenne <- round(stats_vacc_continents$Moyenne, 0)

stats_vacc_continents$Médiane <- round(stats_vacc_continents$Médiane, 0)
```

```{r stats_cont, fig.cap="Statistiques vaccinales, par continent"}
kable(stats_vacc_continents, caption = "Statistiques vaccinales, par continent") %>% 
  kable_styling(full_width = FALSE, font_size = 12)
```

```{r include=FALSE}
kable(stats_vacc_continents, caption = "Statistiques vaccinales, par continent") %>% 
  kable_styling(full_width = FALSE, font_size = 12) %>% 
  save_kable("figures/table_3.png")
```

```{r statsvacc, fig.cap="Médiane et moyenne du nombre de vaccins administrés par million d'habitants", layout="l-body-outset", fig.width=6, fig.height=4}
# Franciser les continents :

stats_vacc_continents$continent <- str_replace_all(stats_vacc_continents$continent, c("Africa" = "Afrique",
                                                                                      "Americas" = "Amériques",
                                                                                      "Asia" = "Asie",
                                                                                      "Oceania" = "Océanie"))

# Graphique :

g4 <- ggplot(data = stats_vacc_continents) +
  
  geom_segment(aes(x = continent, xend = continent,
               y = Moyenne, yend = Médiane), color = "#b7b7bd", size = 1.2) +
  
  geom_point(aes(x = continent, y = Médiane), color = "#462255", size = 4, alpha = 0.9) +
  geom_point(aes(x = continent, y = Moyenne), color = "#63ccca", size = 4, alpha = 0.9) +
  
  scale_x_discrete(name = "") +
  scale_y_continuous(name = "Nombre de vaccins",
                     breaks = seq(0, 5000, 1000),
                     labels = c("0", "1000", "2000", "3000", "4000", "5000")) +
  
  coord_flip() +
  
  labs(title = "<span style = 'color:#462255;'>**Médiane**</span> et <span style = 'color:#63ccca;'>**moyenne**</span> du nombre de vaccins administrés par million d'habitants",
       subtitle = "Données cumulées depuis le mois de décembre 2020") +
  
  theme_ipsum() +
  theme(plot.title = element_markdown(size = 11),
        plot.subtitle = element_text(size = 10, vjust = 4))

g4
```

```{r include=FALSE}
ggsave("figures/graphique_4.jpeg", plot = g4, width = 6, height = 4)
```

#### Au niveau des pays

```{r include=FALSE}
stats_vacc_pays <- df_countries %>% 
  group_by(name, continent) %>% 
  summarise(Minimum = min(daily_vaccinations_per_million, na.rm = TRUE),
            Maximum = max(daily_vaccinations_per_million, na.rm = TRUE),
            Moyenne = mean(daily_vaccinations_per_million, na.rm = TRUE),
            Médiane = median(daily_vaccinations_per_million, na.rm = TRUE)) %>%
  ungroup()

stats_vacc_pays$Moyenne <- round(stats_vacc_pays$Moyenne, 0)

stats_vacc_pays$Médiane <- round(stats_vacc_pays$Médiane, 0)

stats_vacc_pays <- stats_vacc_pays %>% 
 mutate(name = countryname(name, destination = "un.name.fr")) 

stats_vacc_pays$name <-  stats_vacc_pays$name %>% 
  replace_na("Timor") #Francisation ne s'est pas effectuée, donc ajouter le Timor manuellement.
```

```{r stats_pays, fig.cap="Statistiques vaccinales, par pays"}
kable(stats_vacc_pays, caption = "Statistiques vaccinales, par pays") %>% 
  kable_styling(full_width = FALSE, font_size = 12) %>% 
  scroll_box(width = "720px", height = "400px")
```

```{r include=FALSE}
kable(stats_vacc_pays, caption = "Statistiques vaccinales, par pays") %>% 
  kable_styling(full_width = FALSE, font_size = 12) %>% 
  scroll_box(width = "720px", height = "400px") %>% 
  save_kable("figures/table_4.png")
```

::: {style="text-align: justify"}
Les statistiques présentées dans les tableaux \@ref(tab:stats_cont) et \@ref(tab:stats_pays) et le graphique \@ref(fig:statsvacc) mettent en évidence l'écart important entre les pays et les continents en ce qui a trait au nombre de doses administrées quotidiennement (par million d'habitants). Plus précisément, l'Afrique est clairement le continent qui fait moins bonne à ce chapitre, et ce tant en se basant sur la moyenne quotidienne (1301 doses) que la médiane (402 doses). Ce continent fait véritablement bande à part comparativement aux autres. Du surcroît, @nachega2021addressing affirme qu'en plus de l'accaparement des ressources vaccinales par les pays occidentaux d'autres facteurs structurels expliquent aussi les difficultés que rencontre l'Afrique dans la distribution et l'administration des vaccins contre la COVID-19. De fait, l'hésitation vaccinale, le manque d'usines de production de vaccins locales ainsi que le manque d'infrastructures de qualité, comme les chaînes de froid pour les vaccins de type ARN messager, notamment au sein de régions éloignées des centres urbains constituent des éléments structuraux qui ralentissent le rythme de la campagne de vaccination pour contrer la pandémie de coronavirus en Afrique. 
:::

### people_fully_vaccinated_per_hundred  ***FAIRE UNE CARTE ICI POUR LES PAYS***


### total_booster_per_hundred

## Exploration de la variable liée à la population

###

## Exploration des variables liées au PIB

###

## Exploration de la variable liée à l'espérance de vie 

###
